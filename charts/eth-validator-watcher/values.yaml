# Kubernetes config, likely no need to tweak those unless you know
# what you are doing and need specific tweaks.

replicaCount: 1

image:
  repository: ghcr.io/enriquemanuel/eth-validator-watcher
  pullPolicy: IfNotPresent
  tag: 1.0.0

nameOverride: ""
fullnameOverride: ""

extraArgs: {}
deploymentAnnotations: {}
podAnnotations: {}
podLabels: {}
podSecurityContext: {}
securityContext: {}

resources: {}

# Health check probes
# The watcher exposes /health (always OK) and /ready (OK after initialization)
livenessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 10
  periodSeconds: 30
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /ready
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

# Startup probe allows up to 150 seconds for loading 2M+ validators
startupProbe:
  httpGet:
    path: /ready
    port: 8080
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 5
  failureThreshold: 30

nodeSelector: {}
tolerations: []
affinity: {}

serviceAccount:
  create: true
  annotations: {}
  name: ""
  labels: {}

podMonitor:
  enabled: true
  interval: 12s
  additionalLabels: {}
  scheme: http
  tlsConfig: {}
  relabelings: []

# Here is the actual configuration of the watcher.  This needs to be
# edited to your environment / setup / keys.

config: |
  network: mainnet
  beacon_url: http://beacon-node:5052
  beacon_timeout_sec: 30
  metrics_port: 8080
  watched_keys:
    - public_key: '0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef'
      labels:
        - operator:my-operator
        - region:us-east
        - client:lighthouse
    - public_key: '0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890'
      labels:
        - operator:my-operator
        - region:eu-west
        - client:prysm
